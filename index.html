<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M√£ ho√° & Gi·∫£i m√£ + Tra c·ª©u App Store</title>
    <link rel="stylesheet" href="style.css" />
    <style>
        /* Th√™m 1 ch√∫t style cho ph·∫ßn tra c·ª©u */
        #appLookupResult {
            margin-top: 20px;
            white-space: pre-wrap;
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            max-height: 300px;
            overflow: auto;
            font-family: monospace;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>M√£ ho√° & Gi·∫£i m√£</h1>

        <!-- Dropdown ch·ªçn ph∆∞∆°ng th·ª©c m√£ ho√°/gi·∫£i m√£ -->
        <select id="method">
            <option value="base64">Base64 Encoding/Decoding (m·∫∑c ƒë·ªãnh)</option>
            <option value="caesar">Caesar Cipher (+3/-3)</option>
            <option value="reverse">ƒê·∫£o ng∆∞·ª£c chu·ªói</option>
            <option value="reverse-chunk">Reverse Split Chunk</option>
            <option value="custom">ƒê·∫£o ng∆∞·ª£c chu·ªói v√† chia th√†nh c·∫∑p</option>
        </select>

        <!-- √î nh·∫≠p chu·ªói -->
        <input type="text" id="inputText" placeholder="Nh·∫≠p chu·ªói..." />

        <!-- C√°c n√∫t m√£ ho√°/gi·∫£i m√£ -->
        <div class="button-group">
            <button onclick="encodeText()">üîê M√£ ho√°</button>
            <button onclick="decodeText()">üîì Gi·∫£i m√£</button>
        </div>

        <!-- K·∫øt qu·∫£ ƒë·∫ßu ra -->
        <div id="outputText" class="output" title="Click ƒë·ªÉ copy k·∫øt qu·∫£"></div>

        <!-- Th√¥ng b√°o sao ch√©p -->
        <div id="copyMessage" class="copy-message">Copied!</div>

        <!-- PH·∫¶N M·ªöI: Tra c·ª©u App Store -->
        <hr />
        <h2>Tra c·ª©u th√¥ng tin App Store qua App ID ho·∫∑c Bundle ID</h2>
        <input type="text" id="appIdInput"
            placeholder="Nh·∫≠p App ID (vd: 123456789) ho·∫∑c Bundle ID (vd: com.example.app)" />
        <button onclick="lookupAppStore()">Tra c·ª©u</button>

        <pre id="appLookupResult">K·∫øt qu·∫£ tra c·ª©u s·∫Ω hi·ªán ·ªü ƒë√¢y...</pre>
    </div>

    <script src="script.js"></script>

    <script>
        async function lookupAppStore() {
            const input = document.getElementById('appIdInput').value.trim();
            const output = document.getElementById('appLookupResult');
            if (!input) {
                output.textContent = 'Vui l√≤ng nh·∫≠p App ID ho·∫∑c Bundle ID.';
                return;
            }

            let url = '';
            // Ki·ªÉm tra xem input c√≥ ph·∫£i l√† s·ªë (App ID) hay kh√¥ng
            if (/^\d+$/.test(input)) {
                url = `https://itunes.apple.com/lookup?id=${input}`;
            } else {
                url = `https://itunes.apple.com/lookup?bundleId=${encodeURIComponent(input)}`;
            }

            output.textContent = 'ƒêang t·∫£i d·ªØ li·ªáu...';

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                const data = await response.json();

                if (data.resultCount === 0) {
                    output.textContent = 'Kh√¥ng t√¨m th·∫•y app v·ªõi ID/Bundle ID n√†y.';
                    return;
                }

                // Hi·ªÉn th·ªã th√¥ng tin app ƒë·∫πp h∆°n
                const app = data.results[0];
                const appInfo = `
T√™n app: ${app.trackName}
Phi√™n b·∫£n: ${app.version}
Nh√† ph√°t tri·ªÉn: ${app.sellerName}
M√¥ t·∫£: ${app.description.substring(0, 200)}...
App Store URL: ${app.trackViewUrl}
`;
                output.textContent = appInfo;

            } catch (error) {
                output.textContent = `L·ªói khi g·ªçi API: ${error.message}`;
            }
        }
    </script>
</body>

</html>